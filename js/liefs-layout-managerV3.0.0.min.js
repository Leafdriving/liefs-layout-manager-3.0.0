function html(...e){let t=new HtmlBlock("",...e);return t.label=HtmlBlock.defaults.label(),t}function events(...arguments){return new Events(...arguments)}function I(...e){let t=new HtmlBlock(...e);return t.dim?new DisplayCell(t,t.dim):new DisplayCell(t)}function h(...e){let t=new DisplayCell(new DisplayGroup(...e));return t.displaygroup.dim&&(t.dim=t.displaygroup.dim),t}function v(...e){let t=new DisplayCell(new DisplayGroup(!1,...e));return t.displaygroup.dim&&(t.dim=t.displaygroup.dim),t}function H(...e){return new Handler(...e)}function css(...e){return new Css(...e)}function P(...arguments){let e=new DisplayCell(new Pages(...arguments));return e.pages.dim&&(e.dim=e.pages.dim),e}function swipe(...e){let t=new Swipe(...e),s={onMove:function(e){let s=this;t.left&&e.x<-t.swipeDistance&&(t.left(),s.reset()),t.right&&e.x>t.swipeDistance&&(t.right(),s.reset()),t.up&&e.y<-t.swipeDistance&&(t.up(),s.reset()),t.down&&e.y>t.swipeDistance&&(t.down(),s.reset())}};return s}function dragbar(...e){let t=new Overlay("DragBar",...e),s=t.returnObj,i=s.parentDisplaycell;return i.addOverlay(t),i}function T(...e){return new TreeNode(...e)}function props(...e){return new Props(...e)}function tree(...e){let t=new Overlay("Tree",...e),s=t.returnObj,i=s.parentDisplayCell;return i.addOverlay(t),i}class mf{static modifyClassProperties(e,t){for(let s of Object.keys(e))"function"==typeof e[s]&&"label"==s?t[s]=e[s]():t[s]=e[s]}static applyArguments(e,t,s,i,l,r=[]){let n=pf.sortArgs(t,e,r),o=pf.ifObjectMergeWithDefaults(n,s),a=pf.retArgsMapped(n,o,i);mf.modifyClassProperties(a,l)}}class pf{static errorHandling(e){console.log(`Error Handeling Called\n${e}`)}static commonKeys(e,t){let s=[];for(let i in e)i in t&&s.push(i);return s}static retArgsMapped(e,t,s){let i,l={};for(let e in t)l[e]=t[e];for(let t in e)if(t in s)for(i=0;i<e[t].length&&i<s[t].length;)l[s[t][i]]=e[t][i],i++;return l}static ifObjectMergeWithDefaults(e,t){return"object"in e?pf.mergeObjects(t,e.object[0]):t}static sortArgs(e,t="unlabeled",s=[]){s=s.concat(pf.defaultIsChecks);let i,l,r={};for(let t of e){i=typeof t;for(let e of s)l=e(t),l&&(i=l);i in r||(r[i]=[]),r[i].push(t)}return r}static setAttrib(e,t,s){let i=e.getAttribute(t);if(i!=s){let i=document.createAttribute(t);i.value=s,e.setAttributeNode(i)}}static getAttribs(e,t={}){for(let s=0;s<e.attributes.length;s++)t[e.attributes[s].name]=e.attributes[s].value;return t}static elExists(e){return document.getElementById(e)}static viewport(){var e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,t=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;return[e,t]}static errorReporting(e){console.log("Error Reporting"),console.log(e)}static uis0(e){return null==e?0:e}static concatArray(e,t){for(let s of t)e.push(s)}}pf.isTypePx=function(e){if("string"==typeof e&&"px"==e.substr(-2))return"pixels"},pf.pxAsNumber=function(e){return+e.slice(0,-2)},pf.isTypePercent=function(e){if("string"==typeof e&&"%"==e.substr(-1))return"percent"},pf.percentAsNumber=function(e){return+e.slice(0,-1)},pf.isDim=function(e){if("string"==typeof e&&("px"==e.substr(-2)||"%"==e.substr(-1)))return"dim"},pf.isArray=function(e){if("object"==typeof e&&Array.isArray(e))return"Array"},pf.isObjectAClass=function(e){if("object"==typeof e&&"Object"!=e.constructor.name)return e.constructor.name},pf.defaultIsChecks=[pf.isArray,pf.isObjectAClass,pf.isDim],pf.classProperties=function(e){return Object.getOwnPropertyNames(e)},pf.pad_with_zeroes=function(e,t=3){let s=""+e;for(;s.length<t;)s="0"+s;return s},pf.mergeObjects=function(e,t){let s={};for(let t in e)s[t]=e[t];for(let e in t)s[e]=t[e];return s};class Point{}class Within{constructor(...e){mf.applyArguments("Within",e,{},{number:["x","y","width","height"]},this)}clipStyleString(e){return Coord.clipStyleString(this,e)}}class Coord{constructor(...e){this.within=new Within,Coord.instances.push(this),mf.applyArguments("Coord",e,Coord.defaults,Coord.argMap,this)}static byLabel(e){for(let t in Coord.instances)if(Coord.instances[t].label==e)return Coord.instances[t]}copyWithin(...e){let t,s={};mf.applyArguments("Coord.copyWithin",e,{isRoot:!1},Coord.CopyArgMap,s);s.isRoot;if("Within"in s&&(t=s.Within),"Coord"in s&&(t=s.Coord),s.isRoot)for(let e of["x","y","width","height"])this.within[e]=this[e];else if("Coord"in s){let e=s.Coord;for(let t of["x","y","width","height"])this.within[t]=e.within[t];let t=this.x,i=this.y,l=this.width,r=this.height,n=t+l,o=i+r,a=this.within.x,h=this.within.y,c=this.within.width,d=this.within.height,p=a+c,u=h+d,f=t>a?t:a,g=n<p?n:p,y=i>h?i:h,m=o<u?o:u;this.within.x=f,this.within.width=g-f,this.within.y=y,this.within.height=m-y}else console.log("Boo")}copy(...e){let t,s={};mf.applyArguments("Coord.copy",e,{},Coord.CopyArgMap,s),"Within"in s?t=s.Within:"Coord"in s&&(t=s.Coord,this.within=s.Coord.within),t&&(s.left=s.x?s.x:0,s.top=s.y?s.y:0,s.right=s.width?s.width:0,s.bottom=s.height?s.height:0),this.x=t?t.x+s.left:"x"in s?s.x:this.x,this.y=t?t.y+s.top:"y"in s?s.y:this.y,this.width=t?t.width-(s.left+s.right):s.width?s.width:this.width,this.height=t?t.height-(s.top+s.bottom):s.height?s.height:this.height,this.zindex="zindex"in s?s.zindex:Handler.currentZindex}replace(e,t,s,i,l){null!=e&&(this.x=e),null!=t&&(this.y=t),null!=s&&(this.width=s),null!=i&&(this.height=i),null!=l&&(this.zindex=l)}isCoordCompletelyOutside(e=this.within){return e.x+e.width<this.x||e.x>this.x+this.width||e.y+e.height<this.y||e.y>this.y+this.height}derender(e){return e||this.isCoordCompletelyOutside()}clipStyleString(e){return Coord.clipStyleString(this,e)}newClipStyleString(e=this.within){return Coord.clipStyleString(e,this)}static clipStyleString(e,t){let s="",i=t.x<e.x?e.x-t.x:0,l=t.x+t.width>e.x+e.width?t.x+t.width-(e.x+e.width):0,r=t.y<e.y?e.y-t.y:0,n=t.y+t.height>e.y+e.height?t.y+t.height-(e.y+e.height):0;return i+l+r+n>0&&(s=`clip-path: inset(${r}px ${l}px ${n}px ${i}px);`),s}isPointIn(e,t){return this.x<=e&&e<=this.x+this.width&&this.y<=t&&t<=this.y+this.height}asAttributeString(){return`left: ${this.x}px; top:${this.y}px; width:${this.width}px; height:${this.height}px; `+`z-index:${this.zindex};`}newAsAttributeString(){return`left: ${this.x}px; top:${this.y}px; width:${this.width}px; height:${this.height}px; `+`z-index:${this.zindex};${this.newClipStyleString()}`}}Coord.instances=[],Coord.defaults={label:function(){return`Coord_${pf.pad_with_zeroes(Coord.instances.length)}`},x:0,y:0,width:0,height:0,zindex:0},Coord.argMap={string:["label"],number:["x","y","width","height","zindex"]},Coord.CopyArgMap={Within:["Within"],Coord:["Coord"],boolean:["isRoot"],number:["x","y","width","height","zindex"]};class HtmlBlock{constructor(...e){this.attributes={},HtmlBlock.instances.push(this);let t=pf.sortArgs(e,"HtmlBlock");mf.applyArguments("HtmlBlock",e,HtmlBlock.defaults,HtmlBlock.argMap,this);let s=document.getElementById(this.label);if(s&&(this.innerHTML=s.innerHTML,this.attributes=pf.getAttribs(s,this.attributes),s.remove()),"Css"in t)for(let e of t.Css)this.css=(this.css+" "+e.classname).trim();if("number"in t){let e=t.number.length;1==e?this.marginRight=this.marginTop=this.marginBottom=this.marginLeft:2==e&&(this.marginRight=this.marginLeft,this.marginBottom=this.marginTop)}""==this.label.trim()&&(this.label=`htmlBlock_${pf.pad_with_zeroes(HtmlBlock.instances.length)}`)}static byLabel(e){for(let t in HtmlBlock.instances)if(HtmlBlock.instances[t].label==e)return HtmlBlock.instances[t]}}HtmlBlock.instances=[],HtmlBlock.defaults={label:function(){return`htmlBlock_${pf.pad_with_zeroes(HtmlBlock.instances.length)}`},innerHTML:" ",tag:"DIV",css:"",dim:""},HtmlBlock.argMap={string:["label","innerHTML","css"],dim:["dim"],Events:["events"],number:["marginLeft","marginTop","marginRight","marginBottom"],Tree:["tree"]};class Events{constructor(...e){Events.instances.push(this);let t=pf.sortArgs(e,"Events");"object"in t&&(this.actions=t.object[0],delete t.object);let s=pf.ifObjectMergeWithDefaults(t,Events.defaults),i=pf.retArgsMapped(t,s,Events.argMap);mf.modifyClassProperties(i,this)}static byLabel(e){for(let t in Events.instances)if(Events.instances[t].label==e)return Events.instances[t]}applyToHtmlBlock(e){let t=e.el;this.label=e.label;for(let s in this.actions)if("onhold"==s)new Hold(t,this.actions[s]);else if("ondrag"==s)new Drag(t,this.actions[s]);else{let i=this.actions[s];Events.history.push(`document.getElementById("${e.label}").${s} = ${i}`),t[s]=i}}}Events.elementId="llmEvents",Events.instances=[],Events.history=[],Events.defaults={label:function(){return`Events_${pf.pad_with_zeroes(Events.instances.length)}`}},Events.argMap={string:["label"]};class DisplayCell{constructor(...e){this.htmlBlock=void 0,this.displaygroup=void 0,this.overlays=[],this.isRendered=!1,DisplayCell.instances.push(this),mf.applyArguments("DisplayCell",e,DisplayCell.defaults,DisplayCell.argMap,this),this.displaygroup&&this.displaygroup.htmlBlock&&(this.htmlBlock=this.displaygroup.htmlBlock),this.htmlBlock&&(this.label=`${this.htmlBlock.label}`),this.label||(this.label=this.htmlBlock?this.htmlBlock.label+"_DisplayCell":this.displaygroup?this.displaygroup.label+"_DisplayCell":`DisplayCell_${pf.pad_with_zeroes(DisplayCell.instances.length)}`),this.coord=new Coord(this.label)}static byLabel(e){for(let t in DisplayCell.instances)if(DisplayCell.instances[t].label==e)return DisplayCell.instances[t]}addOverlay(e){this.overlays.push(e)}hMenuBar(e){e.launchcell=this,this.htmlBlock.events=events({onmouseover:hMenuBar(e)})}vMenuBar(e){e.launchcell=this,this.htmlBlock.events=events({onmouseover:vMenuBar(e)})}}DisplayCell.instances=[],DisplayCell.defaults={dim:""},DisplayCell.argMap={string:["label"],HtmlBlock:["htmlBlock"],DisplayGroup:["displaygroup"],dim:["dim"],Pages:["pages"]};class DisplayGroup{constructor(...e){this.cellArray=[],this.htmlBlock=void 0,this.overlay=void 0,DisplayGroup.instances.push(this);let t=pf.sortArgs(e,"DisplayGroup");mf.applyArguments("DisplayGroup",e,DisplayGroup.defaults,DisplayGroup.argMap,this),"DisplayCell"in t&&(this.cellArray=t.DisplayCell),"HtmlBlock"in t&&(this.htmlBlock=t.HtmlBlock[0]),"Array"in t&&(this.cellArray=t.Array[0]),"number"in t&&1==t.number.length&&(this.marginVer=this.marginHor=t.number[0]),this.coord=new Coord(this.label);let s=0,i=0;for(let e of this.cellArray){let t=e.dim;""==t?i++:pf.isTypePercent(t)&&(s+=pf.percentAsNumber(t))}let l=100-s;if(i){let e=String(l/i)+"%";for(let t of this.cellArray)""==t.dim&&(t.dim=e)}}static byLabel(e){for(let t in DisplayGroup.instances)if(DisplayGroup.instances[t].label==e)return DisplayGroup.instances[t]}totalPx(){let e=this.cellArray,t=0;for(let s of e)s.pages&&!s.dim&&(s.dim=s.pages.evalCell().dim),pf.isTypePx(s.dim)&&(t+=pf.pxAsNumber(s.dim));return t}}DisplayGroup.defaultMargins=0,DisplayGroup.instances=[],DisplayGroup.defaults={label:function(){return`DisplayGroup_${pf.pad_with_zeroes(DisplayGroup.instances.length)}`},ishor:!0,marginHor:DisplayGroup.defaultMargins,marginVer:DisplayGroup.defaultMargins},DisplayGroup.argMap={string:["label"],boolean:["ishor"],number:["marginHor","marginVer"],dim:["dim"],Overlay:["overlay"]},DisplayGroup.argCustomTypes=[];class Handler{constructor(...e){this.rootCell=void 0,Handler.instances.push(this);let t=pf.sortArgs(e,"Handler");mf.applyArguments("Handler",e,Handler.defaults,Handler.argMap,this),"DisplayCell"in t?this.rootCell=t.DisplayCell[0]:pf.errorHandling(`Handler "${this.label}" requires a DisplayCell`),null==this.handlerMargin&&(this.handlerMargin=Handler.handlerMarginDefault),Handler.update(),Css.update(),Handler.firstRun&&(Handler.firstRun=!1,window.onresize=function(){Handler.update()},window.onwheel=function(e){ScrollBar.onWheel(e)})}static byLabel(e){for(let t in Handler.instances)if(Handler.instances[t].label==e)return Handler.instances[t]}pop(){Handler.pop(this)}toTop(){let e=Handler.instances.indexOf(this);Handler.instances.splice(e,1),Handler.instances.push(this),Handler.update()}static pop(e=Handler.instances[Handler.instances.length-1]){let t=Handler.instances.indexOf(e);-1!=t&&(Handler.update([e],t,!0),Handler.instances.splice(t,1))}static screensizeToCoord(e,t){let s=pf.viewport();e.coord.copy(t,t,s[0]-2*t,s[1]-2*t,Handler.currentZindex)}static update(e=Handler.instances,t=0,s=!1){Pages.activePages=[],Handler.currentZindex=Handler.handlerZindexStart+Handler.handlerZindexIncrement*t;for(let i of e)i.coord?i.rootCell.coord.copy(i.coord):Handler.screensizeToCoord(i.rootCell,i.handlerMargin),i.rootCell.coord.copyWithin(!0),Handler.renderDisplayCell(i.rootCell,void 0,void 0,s),t+=1,Handler.currentZindex=Handler.handlerZindexStart+Handler.handlerZindexIncrement*t;Pages.activePages.length&&Pages.applyOnclick()}static renderDisplayCell(e,t,s,i){let l=e.pages;if(l){let i=l.eval();i!=l.previousPage&&(l.displaycells[l.previousPage].coord.copy(e.coord),Handler.renderDisplayCell(l.displaycells[l.previousPage],t,s,!0)),l.displaycells[i].coord.copy(e.coord),Handler.renderDisplayCell(l.displaycells[i],t,s,!1),l.currentPage=i,l.addSelected(),Pages.activePages.push(l)}else{let l=e.htmlBlock,r=e.displaygroup,n=e.overlays;if(l&&Handler.renderHtmlBlock(e,i,t),r&&(r.coord.copy(e.coord),r&&l&&(Handler.currentZindex+=Handler.zindexIncrement,r.coord.copy(e.coord,pf.uis0(l.marginLeft),pf.uis0(l.marginTop),pf.uis0(l.marginRight),pf.uis0(l.marginBottom))),Handler.renderDisplayGroup(e,i)),n.length)for(let l of n)l.renderOverlay(e,t,s,i)}}static renderDisplayGroup(e,t){let s,i,l=e.displaygroup,r=l.ishor,n=l.coord,o=l.cellArray.length,a=r?l.marginHor*(o-1):l.marginVer*(o-1),h=r?n.width-a:n.height-a,c=l.totalPx(),d=h-c,p=0,u=0,f=d,g=l.overlay;if(d<0){g||(l.overlay=new Overlay("ScrollBar",`${l.label}_ScrollBar`,l,c,h)),l.overlay.renderOverlay(e,l,0,!1);let t=l.coord,s=l.overlay.returnObj,i=s.scrollWidth;t.width-=r?0:i,t.within.width-=r?0:i,t.height-=r?i:0,t.within.height-=r?i:0}else g&&g.currentlyRendered&&l.overlay.renderOverlay(e,l,0,!0);let y,m,b=l.coord.x,w=l.coord.y;l.overlay&&(l.offset=l.overlay.returnObj.offset,b-=r?l.offset:0,w-=r?0:l.offset);for(let e=0;e<o;e++){let o=l.cellArray[e];pf.isTypePercent(o.dim)&&(u=pf.percentAsNumber(o.dim),p+=u,p<=100?(i=Math.round(d*u/100),f-=i):i=f),s=pf.isTypePx(o.dim)?pf.pxAsNumber(o.dim):i,y=r?s:n.width,m=r?n.height:s,o.coord.replace(b,w,y,m,Handler.currentZindex),o.coord.copyWithin(l.coord),Handler.renderDisplayCell(o,l,e,t),b+=r?y+l.marginHor:0,w+=r?0:m+l.marginVer}}static renderHtmlBlock(e,t=!1,s){let i=e.htmlBlock,l=pf.elExists(e.label),r=!!l;if(t=e.coord.derender(t),t)r&&l.remove(),i.el=void 0;else{r||(l=document.createElement(i.tag)),pf.setAttrib(l,"id",e.label),pf.setAttrib(l,"class",i.css),Handler.renderHtmlAttributes(l,i,e.label),l.innerHTML!=i.innerHTML&&(l.innerHTML=i.innerHTML),r||(document.body.appendChild(l),i.el=l,i.events&&i.events.applyToHtmlBlock(i));let t=e.coord.newAsAttributeString();l.style.cssText!=t&&(l.style.cssText=t)}}static renderHtmlAttributes(e,t,s){for(let i in t.attributes){let l=t.attributes[i];"class"==i&&(l+=" "+t.css),"id"==i&&(l=s),pf.setAttrib(e,i,l)}}}Handler.handlerMarginDefault=0,Handler.firstRun=!0,Handler.instances=[],Handler.defaults={label:function(){return`handler_${pf.pad_with_zeroes(Handler.instances.length)}`},cssString:" ",addThisHandlerToStack:!0},Handler.argMap={string:["label"],number:["handlerMargin"],Coord:["coord"]},Handler.argCustomTypes=[],Handler.handlerZindexStart=1,Handler.zindexIncrement=1,Handler.handlerZindexIncrement=100;class Css{constructor(...e){Css.instances.push(this),mf.applyArguments("Css",e,Css.defaults,Css.argMap,this),null==this.cssObj&&(this.cssObj=this.makeObj(),this.css=this.makeString()),this.cssHover&&(this.cssHoverObj=this.makeObj(this.cssHover),this.cssHover=this.makeString(this.cssHoverObj,"hover")),this.cssSelect&&(this.cssSelectObj=this.makeObj(this.cssSelect),this.cssSelect=this.makeString(this.cssSelectObj,"","Selected"))}static byLabel(e){for(let t in Css.instances)if(Css.instances[t].classname==e)return Css.instances[t]}makeString(e=this.cssObj,t="",s=""){let i=`${this.isClassname?".":""}${this.classname}${s}${t?":"+t:""} {\n`;for(let t in e)i+=`  ${t}:${e[t]};\n`;return i+="}",i}makeObj(e=this.css){let t={};e.indexOf("{")>-1&&(e=e.split("{")[1],e=e.split("}")[0]);let s,i,l=e.split(";");for(let e of l)s=e.indexOf(":"),s>-1&&(i=e.split(":"),t[i[0].trim()]=i[1].trim());return t}static byname(e){for(let t of Css.instances)if(t.css==e)return t}static update(){let e=document.getElementById(Css.elementId),t=!0;e||(t=!1,e=document.createElement("style")),pf.setAttrib(e,"id",Css.elementId);let s="\n";for(let e of Css.instances)e.css&&(s+=e.css+"\n"),e.cssHover&&(s+=e.cssHover+"\n"),e.cssSelect&&(s+=e.cssSelect+"\n");e.innerHTML=s,t||document.getElementsByTagName("head")[0].appendChild(e)}}Css.elementId="llmStyle",Css.instances=[],Css.defaults={css:function(){return`Css_${pf.pad_with_zeroes(Css.instances.length)}`},isClassname:!0},Css.argMap={string:["classname","css","cssHover","cssSelect"],boolean:["isClassname"]};class DefaultTheme{}DefaultTheme.advised=new Css("div","position:absolute;",!1),DefaultTheme.context=css("contxt","background-color:white;color: black;outline-style: solid;outline-width: 1px;","contxt:hover","background-color:black;color: white;outline-style: solid;outline-width: 1px;"),Css.theme=DefaultTheme;class Pages{constructor(...e){Pages.instances.push(this);let t=pf.sortArgs(e,"Pages");mf.applyArguments("Pages",e,Pages.defaults,Pages.argMap,this),t.DisplayCell?this.displaycells=t.DisplayCell:pf.errorHandling("Pages Requires at least one DisplayCells")}static byLabel(e,t=Pages.instances){for(let t in Pages.instances)if(Pages.instances[t].label==e)return Pages.instances[t]}eval(){return this.evalFunction(this)}evalCell(){return this.displaycells[this.eval()]}setPage(e){e!=this.currentPage&&(this.previousPage=this.currentPage,this.currentPage=e,Handler.update())}addSelected(e=this.currentPage){let t,s,i=document.querySelectorAll(`[pagebutton='${this.label}|${e}']`);for(let e=0;e<i.length;e++)t=i[e],s=t.getAttribute("select"),s&&pf.setAttrib(i[e],"class",s)}static setPage(e,t){Pages.byLabel(e).setPage(t)}static applyOnclick(){let e,t,s,i,l,r=document.querySelectorAll("[pagebutton]");for(let n=0;n<r.length;n++)l=r[n],e=l.getAttribute("pagebutton"),t=e.split("|"),s=t[0],i=parseInt(t[1]),l.setAttribute("onclick",`Pages.setPage('${s}',${i})`)}}Pages.activePages=[],Pages.instances=[],Pages.defaults={label:function(){return`Pages_${pf.pad_with_zeroes(Pages.instances.length)}`},currentPage:0,previousPage:0,evalFunction:function(e){return e.currentPage}},Pages.argMap={string:["label"],number:["currentPage"],Function:["evalFunction"],dim:["dim"]};class Drag{constructor(...e){this.onDown=function(){},this.onMove=function(){},this.onUp=function(){},this.isDown=!1,Drag.instances.push(this);let t=pf.sortArgs(e,"Drag");if(mf.applyArguments("Drag",e,Drag.defaults,Drag.argMap,this),"Array"in t){let e=t.Array[0];this.onDown=e[0],this.onMove=e[1],this.onUp=e[2]}"HTMLDivElement"in t&&(this.el=t.HTMLDivElement[0]);let s=this;this.el.onmousedown=function(e){s.onDown(),s.isDown=!0,s.mousePos={x:e.clientX,y:e.clientY},window.onmousemove=function(e){s.mouseDiff={x:e.clientX-s.mousePos.x,y:e.clientY-s.mousePos.y},s.onMove(s.mouseDiff)},window.onmouseup=function(e){s.reset(),s.onUp(s.mouseDiff)}}}static byLabel(e){for(let t in Drag.instances)if(Drag.instances[t].label==e)return Drag.instances[t]}reset(){window.onmousemove=function(){},window.onmouseup=function(){},this.isDown=!1}}Drag.instances=[],Drag.defaults={label:function(){return`Drag_${pf.pad_with_zeroes(Drag.instances.length)}`}},Drag.argMap={string:["label"]};class Swipe{constructor(...e){Swipe.instances.push(this);let t=pf.sortArgs(e,"Swipe"),s=pf.ifObjectMergeWithDefaults(t,Swipe.defaults),i=pf.retArgsMapped(t,s,Swipe.argMap);mf.modifyClassProperties(i,this)}}Swipe.swipeDistance=50,Swipe.elementId="llmSwipe",Swipe.instances=[],Swipe.defaults={label:function(){return`Swipe_Instance_${pf.pad_with_zeroes(Swipe.instances.length)}`},swipeDistance:Swipe.swipeDistance},Swipe.argMap={string:["label"],number:["swipeDistance"]};class Hold{constructor(...e){this.onDown=function(){},this.event=function(){},this.onUp=function(){},this.isDown=!1,Hold.instances.push(this);let t=pf.sortArgs(e,"Hold");mf.applyArguments("Hold",e,Hold.defaults,Hold.argMap,this),"HTMLDivElement"in t&&(this.el=t.HTMLDivElement[0]);let s=this;this.el.onmousedown=function(e){s.onDown(),s.isDown=!0,s.doOnclick&&s.event(),setTimeout(function(){Hold.start(s)},s.startTime),window.onmouseup=function(e){s.onUp(),s.isDown=!1}}}static byLabel(e){for(let t in Hold.instances)if(Hold.instances[t].label==e)return Hold.instances[t]}static start(e){e.isDown&&(e.event(),setTimeout(function(){Hold.start(e)},e.repeatTime))}}Hold.instances=[],Hold.defaults={label:function(){return`Hold_${pf.pad_with_zeroes(Hold.instances.length)}`},startTime:1e3,repeatTime:100,doOnclick:!0},Hold.argMap={string:["label"]};class Overlay{constructor(...e){Overlay.instances.push(this),this.label=`Overlay_${pf.pad_with_zeroes(Overlay.instances.length)}`,this.sourceClassName=e.shift(),this.returnObj=new Overlay.classes[this.sourceClassName](...e)}static byLabel(e){for(let t in Overlay.instances)if(Overlay.instances[t].label==e)return Overlay.instances[t]}renderOverlay(e,t,s,i){this.currentlyRendered=!i,this.returnObj.render(e,t,s,i)}}Overlay.instances=[],Overlay.classes={};class DragBar{constructor(...e){let t=this;this.parentDisplaycell;DragBar.instances.push(this);pf.sortArgs(e,"DragBar");mf.applyArguments("DragBar",e,DragBar.defaults,DragBar.argMap,this),this.displaycell=I(`${this.label}_dragbar`,"",events({ondrag:{onDown:function(e){t.startpos=pf.pxAsNumber(t.parentDisplaycell.dim)},onMove:function(e){let s=t.startpos+(t.ishor?e.x:e.y)*(t.isLast?-1:1);s>t.max&&(s=t.max),s<t.min&&(s=t.min),t.parentDisplaycell.dim=`${s}px`,Handler.update()}}}))}static byLabel(e){for(let t in DragBar.instances)if(DragBar.instances[t].label==e)return DragBar.instances[t]}render(e,t,s,i){let l=this,r=l.displaycell,n=t.ishor;l.ishor=n;let o=l.pxsize?l.pxsize:n?t.marginHor:t.marginVer,a=s==t.cellArray.length-1;l.isLast=a;let h=e.coord,c=n?a?h.x-o:h.x+h.width:h.x,d=n?h.y:a?h.y-o:h.y+h.height,p=n?o:h.width,u=n?h.height:o;r.coord.replace(c,d,p,u,Handler.currentZindex+Handler.zindexIncrement),r.htmlBlock.css=n?l.horcss.classname:l.vercss.classname,t.coord.isCoordCompletelyOutside(r.coord)&&(i=!0),Handler.renderDisplayCell(r,t,void 0,i)}}DragBar.horCss=css("db_hor","background-color:black;cursor: ew-resize;"),DragBar.verCss=css("db_ver","background-color:black;cursor: ns-resize;"),DragBar.instances=[],DragBar.defaults={label:function(){return`DragBar_${pf.pad_with_zeroes(DragBar.instances.length)}`},horcss:DragBar.horCss,vercss:DragBar.verCss},DragBar.argMap={string:["label"],DisplayCell:["parentDisplaycell"],number:["min","max","pxsize"],Css:["horcss","vercss"]},Overlay.classes.DragBar=DragBar;class ScrollBar{constructor(...e){ScrollBar.instances.push(this),mf.applyArguments("ScrollBar",e,ScrollBar.defaults,ScrollBar.argMap,this),this.build()}static byLabel(e){for(let t in ScrollBar.instances)if(ScrollBar.instances[t].label==e)return ScrollBar.instances[t]}build(){let e=this,t=this.arrowOffset,s=this.scrollWidth,i=s-t,l=s/2;this.leftArrow=I(this.label+"_Left",`<svg height="${s}" width="${s}">\n            <polygon points="${t},${l} ${i},${t} ${i},${i} ${t},${l}"\n            style="fill:black;stroke:black;stroke-width:1" />\n            </svg>`,`${s}px`,"whiteBG",events({onhold:{event:function(t){e.clickLeftorUp(t)}}})),this.upArrow=I(this.label+"_Up",`<svg height="${s}" width="${s}">\n            <polygon points="${t},${i} ${l},${t} ${i},${i} ${t},${i}"\n            style="fill:black;stroke:black;stroke-width:1" />\n            </svg>`,`${s}px`,"whiteBG",events({onhold:{event:function(t){e.clickLeftorUp(t)}}})),this.prePaddle=I(this.label+"_Pre","","whiteBG",events({onclick:function(t){e.clickPageLeftorUp(t)}})),this.paddle=I(this.label+"_Paddle","","blackBG",events({ondrag:{onDown:function(){e.offsetAtDrag=e.offset},onMove:function(t){e.dragging(t)}}})),this.postPaddle=I(this.label+"_Post","","whiteBG",events({onclick:function(t){e.clickPageRightOrDown(t)}})),this.rightArrow=I(this.label+"_Right",`<svg height="${s}" width="${s}">\n            <polygon points="${t},${t} ${i},${l} ${t},${i} ${t},${t}"\n            style="fill:black;stroke:black;stroke-width:1" />\n            </svg>`,`${s}px`,"whiteBG",events({onhold:{event:function(t){e.clickRightOrDown(t)}}})),this.downArrow=I(this.label+"_down",`<svg height="${s}" width="${s}">\n            <polygon points="${t},${t} ${i},${t} ${l},${i} ${t},${t}"\n            style="fill:black;stroke:black;stroke-width:1" />\n            </svg>`,`${s}px`,"whiteBG",events({onhold:{event:function(t){e.clickRightOrDown(t)}}})),this.ishor=this.displaygroup.ishor,this.displaycell=h(this.ishor,this.ishor?this.leftArrow:this.upArrow,this.prePaddle,this.paddle,this.postPaddle,this.ishor?this.rightArrow:this.downArrow,this.label)}clickLeftorUp(e,t=1){this.offset-=this.offsetPixelRatio*t,this.offset<0&&(this.offset=0),Handler.update()}clickRightOrDown(e,t=1){this.offset+=this.offsetPixelRatio*t,this.offset>this.maxOffset&&(this.offset=this.maxOffset),Handler.update()}clickPageLeftorUp(e){this.offset-=this.displayedFixedPx,this.offset<0&&(this.offset=0),Handler.update()}clickPageRightOrDown(e){this.offset+=this.displayedFixedPx,this.offset>this.maxOffset&&(this.offset=this.maxOffset),Handler.update()}dragging(e){let t=this.ishor?e.x:e.y,s=this.offsetAtDrag+t*this.offsetPixelRatio;s<0&&(s=0),s>this.maxOffset&&(s=this.maxOffset),this.offset=s,Handler.update()}render(e,t,s,i){let l=this.displaygroup.coord,r=this.ishor?l.within.x:l.within.x+l.within.width-this.scrollWidth,n=this.ishor?l.within.width:this.scrollWidth,o=this.ishor?l.within.y+l.within.height-this.scrollWidth:l.within.y,a=this.ishor?this.scrollWidth:l.within.height;this.displaycell.coord.replace(r,o,n,a);let h=this.displaycell.displaygroup.cellArray[1],c=this.displaycell.displaygroup.cellArray[2],d=this.displaycell.displaygroup.cellArray[3],p=this.displaygroup.totalPx(),u=this.displayedFixedPx=this.ishor?n:a;this.maxOffset=p-u,this.offset>this.maxOffset&&(this.offset=this.maxOffset),this.offset<0&&(this.offset=0),this.offsetPixelRatio=p/u;let f=Math.round(this.offset/p*100),g=Math.round(u/p*100),y=100-g-f;h.dim=`${f}%`,c.dim=`${g}%`,d.dim=`${y}%`,Handler.currentZindex+=2*Handler.zindexIncrement,this.currentlyRendered=!i,Handler.renderDisplayCell(this.displaycell,void 0,void 0,i),Handler.currentZindex-=2*Handler.zindexIncrement}static distOfMouseFromWheel(e,t){let s=e.displaygroup.ishor,i=e.displaycell,l=i.coord,r=t.clientX,n=t.clientY,o=0;return s?(n<l.y&&(o=l.y-n),n>l.y+l.height&&(o=n-(l.y+l.height))):(r<l.x&&(o=l.x-r),r>l.x+l.width&&(o=r-(l.x+l.width))),o}static onWheel(e){let t,s,i=1e5;for(let l of ScrollBar.instances)l.currentlyRendered&&(s=ScrollBar.distOfMouseFromWheel(l,e),(!t||s<i)&&(i=s,t=l));t&&(e.deltaY>0&&t.clickRightOrDown(e,ScrollBar.scrollWheelMult*e.deltaY/100),e.deltaY<0&&t.clickLeftorUp(e,-ScrollBar.scrollWheelMult*e.deltaY/100))}}ScrollBar.instances=[],ScrollBar.whiteBG=css("whiteBG","background-color:white;outline: 1px solid black;outline-offset: -1px;"),ScrollBar.blackBG=css("blackBG","background-color:black;color:white;cursor: -webkit-grab; cursor: grab;"),ScrollBar.defaults={label:function(){return`ScrollBar_${pf.pad_with_zeroes(ScrollBar.instances.length)}`},offset:0,displayAtEnd:!0,scrollWidth:15,currentlyRendered:!0,arrowOffset:2},ScrollBar.argMap={string:["label"],DisplayGroup:["displaygroup"],number:["fixedPixels","viewingPixels","scroolWidth"],boolean:["displayAtEnd"]},ScrollBar.scrollWheelMult=4,Overlay.classes.ScrollBar=ScrollBar;class Context{constructor(...e){this.coord=new Coord,Context.instances.push(this),mf.applyArguments("Context",e,Context.defaults,Context.argMap,this),this.menuObj||(this.menuObj=Context.defaultObj),this.height=Object.keys(this.menuObj).length*this.cellheight,this.buildCell()}static byLabel(e){for(let t in Context.instances)if(Context.instances[t].label==e)return Context.instances[t]}buildCell(){let e,t=this,s=[],i=Object.keys(this.menuObj).length,l=0;this.displaycell=v({cellArray:[]});for(let r in this.menuObj){let n=this.menuObj[r];"function"==typeof n?s.push(I(l==i-1?"100%":`${this.cellheight}px`,{innerHTML:r},this.css,events({onclick:function(e){n(e),t.popAll()}}))):(e=new Context({menuObj:n,width:this.width,cellheight:this.cellheight,css:this.css,parentContext:this}),e.launchcell=I(l==i-1?"100%":`${this.cellheight}px`,{innerHTML:r},this.css,events({onmouseover:function(){let s=t.coord;e.handler||e.render(void 0,s.x+s.width-Context.subOverlapPx,s.y+t.cellheight*(l-2)-Context.subOverlapPx)}})),s.push(e.launchcell)),l+=1}this.displaycell.displaygroup.cellArray=s}popAll(){this.pop(),this.parentContext?this.parentContext.popAll():window.onmousemove=function(){}}pop(){this.handler.pop(),this.handler=void 0,this.parentContext&&(Context.lastRendered=this.parentContext)}managePop(e){let t=e.clientX,s=e.clientY,i=!this.displaycell.coord.isPointIn(t,s);i&&this.launchcell&&this.launchcell.coord.isPointIn(t,s)&&(i=!1);let l=this;i&&(this.parentContext?window.onmousemove=function(e){l.parentContext.managePop(e)}:window.onmousemove=function(){},this.pop())}render(e,t=0,s=0){e&&(t=e.clientX-Context.subOverlapPx,s=e.clientY-Context.subOverlapPx),this.coord.replace(t,s,this.width,this.height),this.handler=H(this.displaycell,this.coord);let i=this;window.onmousemove=function(e){i.managePop(e)},Context.lastRendered=this}hMenuBarx(){return this.launchcell.coord.x}hMenuBary(){return this.launchcell.coord.y+this.launchcell.coord.height}vMenuBarx(){return this.launchcell.coord.x+this.launchcell.coord.width}vMenuBary(){return this.launchcell.coord.y}}Context.subOverlapPx=4,Context.instances=[],Context.defaultMenuBarCss=css("menuBar","background-color:white;color: black;"),Context.defaultMenuBarHover=css("menuBar:hover","background-color:black;color: white;"),Context.defaultMenuBarNoHoverCss=css("menuBarNoHover","background-color:white;color: black;"),Context.defaultObj={one:function(){console.log("one")},two:function(){console.log("two")},three:function(){console.log("three")}},Context.defaults={label:function(){return`Context_${pf.pad_with_zeroes(Context.instances.length)}`},width:100,cellheight:25,css:Css.theme.context},Context.argMap={string:["label"],number:["width","cellheight"]};let context=function(...e){let t=new Context(...e);return function(e){return t.render(e),!1}},hMenuBar=function(...e){let t=new Context(...e);return function(e){return Context.lastRendered&&Context.lastRendered.handler&&Context.lastRendered.popAll(),t.render(void 0,t.hMenuBarx(),t.hMenuBary()),!1}},vMenuBar=function(...e){let t=new Context(...e);return function(e){return t.render(void 0,t.vMenuBarx(),t.vMenuBary()),!1}};class Modal{constructor(...e){Modal.instances.push(this);let t=pf.sortArgs(e,"Modal");if(mf.applyArguments("Modal",e,Modal.defaults,Modal.argMap,this),"number"in t){this.coord||(this.coord=new Coord);let e,s,i,l,r=t.number,n=r.length;if(2==n){let t=pf.viewport();i=r[0],l=r[1],e=(t[0]-i)/2,s=(t[1]-l)/2,this.coord.replace(e,s,i,l)}else 4==n&&this.coord.replace(r[0],r[1],r[2],r[3])}else if(!this.coord){let e=pf.viewport();this.coord=new Coord(Math.round(e[0]/4),Math.round(e[1]/4),Math.round(e[0]/2),Math.round(e[1]/2))}this.minWidth||(this.minWidth=this.coord.width),this.minHeight||(this.minHeight=this.coord.height),this.build()}static byLabel(e){for(let t in Modal.instances)if(Modal.instances[t].label==e)return Modal.instances[t]}buildHeader(){let e=this;this.headerCell||(this.headerCell=h(`${this.label}_header`,`${this.headerHeight}px`,I(`${this.label}_headerTitle`,this.headerTitle,Modal.headerCss,events({ondrag:{onDown:function(){return Modal.startMoveModal(e.handler)},onMove:function(t){return Modal.moveModal(e.handler,t)},onUp:function(e){console.log(e,"up")}}
}))),this.showClose&&this.headerCell.displaygroup.cellArray.push(I({innerHTML:`<svg viewPort="0 0 ${this.headerHeight} ${this.headerHeight}" version="1.1"\n                              xmlns="http://www.w3.org/2000/svg">\n                              <line x1="3" y1="${this.headerHeight-3}" \n                                x2="${this.headerHeight-3}" y2="3" \n                                stroke="black" \n                                stroke-width="2"/>\n                              <line x1="3" y1="3" \n                                x2="${this.headerHeight-3}" y2="${this.headerHeight-3}" \n                                stroke="black" \n                                stroke-width="2"/>\n                              </svg>`},Modal.closeCss,`${this.headerHeight}px`,events({onclick:function(){e.hide()}}))))}buildFooter(){this.footerCell||(this.footerCell=h(`${this.label}_footer`,`${this.footerHeight}px`,I(`${this.label}_footerTitle`,this.footerTitle,Modal.footerCss)))}buildFull(){this.fullCell=v(this.bodyCell),this.showHeader&&this.fullCell.displaygroup.cellArray.unshift(this.headerCell),this.showFooter&&this.fullCell.displaygroup.cellArray.push(this.footerCell)}build(){this.buildHeader(),this.buildFooter(),this.buildFull(),this.handler=H(v(this.fullCell),this.coord),this.handler.pop()}show(){Handler.instances.push(this.handler),Handler.update()}hide(){this.handler.pop()}static startMoveModal(e){Modal.x=e.coord.x,Modal.y=e.coord.y}static moveModal(e,t){let s=pf.viewport(),i=Modal.x+t.x;i<0&&(i=0),i+e.coord.width>s[0]&&(i=s[0]-e.coord.width),e.coord.x=i;let l=Modal.y+t.y;l<0&&(l=0),l+e.coord.height>s[1]&&(l=s[1]-e.coord.height),e.coord.y=l,Handler.update()}}Modal.instances=[],Modal.headerCss=css("HeaderTitle","background-color:blue;color:white;text-align: center;border: 1px solid black;cursor: -webkit-grab; cursor: grab;"),Modal.footerCss=css("FooterTitle","background-color:white;color:black;border: 1px solid black;"),Modal.closeCss=css("Close","background-color:white;color:black;border: 1px solid black;font-size: 20px;"),Modal.closeCssHover=css("Close:hover","background-color:red;color:white;border: 1px solid black;font-size: 20px;"),Modal.defaults={label:function(){return`Modal_${pf.pad_with_zeroes(Modal.instances.length)}`},showHeader:!0,showFooter:!0,resizeable:!0,showClose:!0,headerHeight:20,footerHeight:20,headerTitle:""},Modal.argMap={string:["label","headerTitle","footerTitle"],DisplayCell:["bodyCell","headerCell","footerCell"],Coord:["coord"]};class TreeNode{constructor(...e){this.collapsed=!1,this.nodeCellArray=[],TreeNode.instances.push(this),mf.applyArguments("TreeNode",e,TreeNode.defaults,TreeNode.argMap,this)}static byLabel(e){for(let t in TreeNode.instances)if(TreeNode.instances[t].label==e)return TreeNode.instances[t]}visibleChildren(e=0){if(!this.collapsed&&this.children)for(let t of this.children)e+=t.visibleChildren(1);return e}addDisplayCells(e=[],t=!0){if(t||e.push(this.horizontalDisplayCell),!this.collapsed&&this.children)for(let t of this.children)e=t.addDisplayCells(e,!1);return e}}TreeNode.instances=[],TreeNode.defaults={label:function(){return`TreeNode_${pf.pad_with_zeroes(TreeNode.instances.length)}`}},TreeNode.argMap={DisplayCell:["labelCell"],string:["label"],Props:["props"],Array:["children"],boolean:["collapsed"]};class Props{constructor(...e){Props.instances.push(this);let t=pf.sortArgs(e,"Prop");mf.applyArguments("Prop",e,Props.defaults,Props.argMap,this),"DisplayCell"in t&&(this.cellArray=t.DisplayCell)}static byLabel(e){for(let t in Props.instances)if(Props.instances[t].label==e)return Props.instances[t]}}Props.instances=[],Props.defaults={label:function(){return`Prop_${pf.pad_with_zeroes(Props.instances.length)}`}},Props.argMap={string:["label"]};class Tree{constructor(...e){Tree.instances.push(this),mf.applyArguments("Tree",e,Tree.defaults,Tree.argMap,this),this.rootTreeNode||(this.rootTreeNode=Tree.defaultObj),this.parentDisplayCell||(this.parentDisplayCell=new DisplayCell(`TreeRoot_${this.label}`)),this.parentDisplayCell.displaygroup=new DisplayGroup(!1),this.buildTreeNode(this.rootTreeNode,this.parentDisplayCell.displaygroup.cellArray)}static byLabel(e){for(let t in Tree.instances)if(Tree.instances[t].label==e)return Tree.instances[t]}drawSVG(e){let t=this.collapsePad,s=(this.cellHeight-this.collapseSize)/2+this.collapsePad,i=this.collapseSize-t,l=s+this.collapseSize-2*this.collapsePad,r=this.collapseSize/2,n=this.cellHeight/2,o=this.SVGColor;return`<svg height="${this.cellHeight}" width="${this.collapseSize}">`+(e?`<polygon points="${t},${s} ${i},${n} ${t},${l} ${t},${s}"`:`<polygon points="${t},${s} ${i},${s} ${r},${l} ${t},${s}"`)+`style="fill:${o};stroke:${o};stroke-width:1" />\n            </svg>`}toggleCollapse(e,t,s){e.collapsed=!e.collapsed,e.horizontalDisplayCell.displaygroup.cellArray[1].htmlBlock.innerHTML=this.drawSVG(e.collapsed);let i=this.parentDisplayCell.displaygroup.cellArray,l=i.indexOf(e.horizontalDisplayCell);if(e.collapsed){for(let t of e.nodeCellArray)Handler.renderDisplayCell(t,void 0,void 0,!0);e.collapsed=!e.collapsed;let t=e.visibleChildren();e.collapsed=!e.collapsed,i.splice(l+1,t)}else i.splice(l+1,0,...e.addDisplayCells());Handler.update()}static temp(e){for(let t of e)console.log(t.displaygroup.cellArray[2].htmlBlock.innerHTML)}buildTreeNode(e=this.rootTreeNode,t,s=this.startIndent){let i=this,l=!!e.children&&!!e.children.length;if(e.horizontalDisplayCell=h(I(e.label+"_spacer","",`${s}px`),I(e.label+"_svg",l?this.drawSVG(e.collapsed):"",`${this.collapseSize}px`,events({onclick:function(t){i.toggleCollapse(e,t,this)}})),e.labelCell,`${this.cellHeight}px`),t.push(e.horizontalDisplayCell),e.children){for(let t of e.children)this.buildTreeNode(t,e.nodeCellArray,s+this.indent);e.collapsed||pf.concatArray(t,e.nodeCellArray)}}render(e){}}Tree.instances=[],Tree.defaultObj=T("Tree",I("Tree_TopDisplay","Top Display"),props(I("Tree_TopDisplay_prop1","prop1"),I("Tree_TopDisplay_prop2","prop2")),[T("Tree_child1",I("Tree_Child1ofTop","Child1ofTop"),[T("Tree_child1_1",I("Tree_Child1ofChild1","Child1ofChild1")),T("Tree_child1_2",I("Tree_Child2ofChild1","Child2ofChild1"))]),T("Tree_child2",I("Tree_Child2ofTop","Child2ofTop"))]),Tree.defaults={label:function(){return`Tree_${pf.pad_with_zeroes(Tree.instances.length)}`},cellHeight:20,SVGColor:"white",startIndent:0,indent:10,collapsePad:4,collapseSize:16},Tree.argMap={string:["label"],number:["cellHeight"],TreeNode:["rootTreeNode"],DisplayCell:["parentDisplayCell"]},Overlay.classes.Tree=Tree;